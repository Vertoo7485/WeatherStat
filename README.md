# README

## API для статистики по погоде

## Для запуска Api необходимо:

1. Скачать проект

2. Установить необходимые гемы
  ```
  bundle install
  ```
3. Создать Базу данных и выполнить миграции
  ```
  rails db:create
  ```
  ```
  rails db:migrate
  ```
4. Запустить сервер и воркер задач
  ```
  rails s
  ```
  ```
  rails jobs:workoff
  ```

### Документация создана с помощью библиотеки Swagger и хранится на странице:  ```'/documentation'```

### Основные библиотеки для работы Rails 6, Grape, Delayed::Job, Rufus, RSpec, VCR, Swagger, PG, Puma

Как источник данных использовался сервис https://yandex.ru/dev/weather/

Город для статистики - Москва.

API открыт для всех, авторизация не нужна.

### Эндпоинты:

/weather/current - Текущая температура

/weather/historical - Почасовая температура за последние 24 часа

/weather/historical/max - Максимальная темперетура за 24 часа

/weather/historical/min - Минимальная темперетура за 24 часа

/weather/historical/avg - Средняя темперетура за 24 часа

/weather/by_time - Температура ближайшая к переданному timestamp (например 1621823790 должен отдать температуру за 2021-05-24 08:00. Из имеющихся данных, если такого времени нет вернет 404)

/health - Статус бекенда (Всегда отвечает OK)

Сделаны интеграционные тесты на эндпоинты и юнит тест с использованием библиотек: RSpec, VCR

Данные о температуре хранятся локально для снижения нагрузки на сторонний API.

Обновление данных происходит в фоном режиме с использованием библиотек: Delayed::Job, Rufus

База данных используется Postgresql

Также используется swagger документация, с дополнительным оформлением css.
